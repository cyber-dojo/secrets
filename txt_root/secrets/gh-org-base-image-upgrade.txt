secret-name: BASE_IMAGE_UPGRADE
secret-expire: 2025-11-13
is-secret: true

secret-updated: 2025-08-15
secret-updated-by: JJ
secret-type: gh-org
secret-usage: Token used to create a pull-request to update the FROM base image in Dockerfiles.
cyber-dojo's 10 microservices are mostly simple rack/sinatra based on Alpine and use
a common Docker base-image from the sinatra-base repo. If a snyk scan detects a new
vulnerability in the sinatra-base image, it would be laborious and tedious if this had
to be propagated manually to every downstream image.


The permission settings for the fine-grained Personal Access Token are as follows:
Repository access: All repositories
Repository permissions:
  Code and PRs: Read-write
  Metadata: Read-only
Organization permissions:
  None


Update-instructions:
Go to https://github.com/settings/personal-access-tokens/6494696 and regenerate the token (URL is JJ specific)
If you are not JJ, create a new PAT with permissions above.
Copy the token into your paste-buffer.
Go to https://github.com/organizations/cyber-dojo/settings/secrets/actions/BASE_IMAGE_UPGRADE
and set the value.
Click [Update secret]