name: Daily Check for new/expiring Github secrets

on:
  schedule: # At 07:00 every weekday
    - cron: '0 7 * * 1-5'

jobs:
  check-secrets:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Add Org secrets to API_SECRETS_FILENAME
        env:
          LIST_ORG_AND_REPO_SECRETS: ${{ secrets.SNAFU }}
        run: |
          ./bin/github_api_curl.sh "${LIST_ORG_AND_REPO_SECRETS}" "orgs/${ORG}/actions/secrets"
